'use strict';

var _util = require('../util');

module.exports = function (context) {
  var creatorName = context.options[0] || 'creator';

  return {
    CallExpression: function CallExpression(node) {
      if (!(0, _util.isDefineActionCall)(node)) {
        return;
      }
      var properties = (0, _util.getPropertiesOfSecondArgumentOf)(node);
      var creator = (0, _util.findInProperties)(properties, creatorName);
      if (!creator) {
        context.report(node, 'Missing ' + creatorName + ' function');
      }
    }
  };
};

module.exports.schema = [{
  type: 'string'
}];